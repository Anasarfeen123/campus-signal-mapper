<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIT Chennai Signal Map</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <style>
        :root {
            --primary-color: #007bff;
            --primary-hover: #0056b3;
            --card-bg: #ffffff;
            --body-bg: #f4f7f6;
            --text-color: #333;
            --text-muted: #666;
            --border-color: #e0e0e0;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        html, body {
            height: 100%;
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
            background: var(--body-bg);
        }

        #map {
            height: 100%;
            width: 100%;
        }

        .controls {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1000;
            background: var(--card-bg);
            padding: 16px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            min-width: 280px;
        }

        .controls h1 {
            font-size: 1.3rem;
            margin: 0 0 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .control-group {
            margin-bottom: 12px;
        }

        label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 5px;
            color: var(--text-muted);
        }

        select, input, button {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            font-size: 0.95rem;
        }

        button {
            cursor: pointer;
            font-weight: 600;
            background: #f8f9fa;
        }

        button:hover {
            background: #e2e6ea;
        }

        #status {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        #status-light {
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background: #999;
            margin-right: 7px;
        }

        #status-light.live { background: #28a745; }
        #status-light.loading { background: #ffc107; }
        #status-light.disconnected { background: #dc3545; }

        .locate-btn {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
        }

        .upload-link {
            display: block;
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }
    </style>
</head>

<body>

<div id="map"></div>

<div class="controls">
    <h1>
        VIT Signal Map
        <div id="status">
            <div id="status-light"></div>
            <span id="status-text">Connecting...</span>
        </div>
    </h1>

    <div class="control-group">
        <label for="heatmap-data">Show Data For</label>
        <select id="heatmap-data">
            <option value="dbm">Signal Strength (dBm)</option>
            <option value="download">Download Speed (Mbps)</option>
        </select>
    </div>

    <div class="control-group">
        <label for="carrier-select">Your Carrier</label>
        <select id="carrier-select">
            <option value="">-- Select Carrier --</option>
            <option value="Jio">Jio</option>
            <option value="Airtel">Airtel</option>
            <option value="VI">VI (Vodafone Idea)</option>
            <option value="BSNL">BSNL</option>
            <option value="Other">Other</option>
        </select>

        <input
            type="text"
            id="custom-carrier"
            placeholder="Enter custom carrier"
            style="display:none; margin-top:8px;"
        />

        <button id="detect-carrier-btn" style="margin-top:8px;">
            Detect My Carrier
        </button>

        <p id="carrier-status"></p>
    </div>

    <div class="control-group">
        <label for="network">Network</label>
        <select id="network">
            <option value="">All</option>
            <option>3G</option>
            <option>4G</option>
            <option>5G</option>
        </select>
    </div>

    <button id="locate-btn" class="locate-btn">
        üìç Show My Location
    </button>

    <a href="/upload" class="upload-link">Contribute Your Data</a>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
<script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
<script src="/static/main.js"></script>

</body>
</html>
