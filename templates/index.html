<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIT Chennai Signal Map</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
/* ================= THEME ================= */
:root {
  --blue:#2563eb;
  --purple:#7c3aed;
  --green:#22c55e;
  --red:#ef4444;
  --bg:#f1f5f9;
  --glass:rgba(255,255,255,.82);
  --text:#0f172a;
  --muted:#64748b;
  --radius:16px;
  --shadow:0 25px 50px rgba(0,0,0,.18);
}

/* ================= BASE ================= */
html,body {
  height:100%;
  margin:0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto;
  background:radial-gradient(circle at top, #e0f2fe, #f8fafc 60%);
  color:var(--text);
}

#map { height:100%; }

/* Dim when outside campus */
.map-dim {
  filter: grayscale(.85) brightness(.7);
  transition:.4s ease;
}

/* ================= PANEL ================= */
.controls {
  position:absolute;
  top:18px;
  left:18px;
  width:320px;
  padding:18px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.75));
  backdrop-filter: blur(16px);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  border:1px solid rgba(255,255,255,.4);
  z-index:1000;
  animation: floatIn .6s ease;
}

@keyframes floatIn {
  from { opacity:0; transform:translateY(12px); }
  to { opacity:1; transform:none; }
}

/* ================= HEADER ================= */
.header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

.header h1 {
  font-size:1.15rem;
  font-weight:800;
  letter-spacing:.2px;
  background:linear-gradient(90deg, var(--blue), var(--purple));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* ================= STATUS ================= */
#status {
  display:flex;
  gap:6px;
  align-items:center;
  font-size:.72rem;
  font-weight:600;
  color:var(--muted);
}

#status-light {
  width:9px;
  height:9px;
  border-radius:50%;
  background:#94a3b8;
}

#status-light.live {
  background:var(--green);
  box-shadow:0 0 14px rgba(34,197,94,.9);
  animation:pulse 2.2s infinite;
}

#status-light.loading {
  background:#facc15;
  animation:pulse 1.2s infinite;
}

#status-light.disconnected {
  background:var(--red);
}

@keyframes pulse {
  50% { opacity:.45 }
}

/* ================= OFFLINE ================= */
.offline-banner {
  display:none;
  margin-bottom:10px;
  background:linear-gradient(90deg, #fee2e2, #fecaca);
  color:#991b1b;
  padding:8px;
  border-radius:10px;
  font-size:.75rem;
  font-weight:700;
  text-align:center;
}

/* ================= FORM ================= */
label {
  font-size:.7rem;
  font-weight:700;
  color:var(--muted);
  margin-top:6px;
  display:block;
}

select {
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,.08);
  margin-bottom:12px;
  background:rgba(255,255,255,.9);
  font-weight:600;
}

/* ================= BUTTON ================= */
button {
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  font-weight:800;
  cursor:pointer;
  transition:.18s ease;
}

.btn-primary {
  background:linear-gradient(135deg, var(--blue), var(--purple));
  color:white;
  box-shadow:0 10px 25px rgba(99,102,241,.35);
}

.btn-primary:hover {
  transform:translateY(-1px);
  box-shadow:0 14px 32px rgba(99,102,241,.45);
}

/* ================= TOAST ================= */
.toast {
  position:fixed;
  bottom:28px;
  left:50%;
  transform:translateX(-50%) translateY(16px);
  background:#0f172a;
  color:white;
  padding:12px 22px;
  border-radius:999px;
  font-size:.85rem;
  font-weight:700;
  opacity:0;
  pointer-events:none;
  transition:.3s ease;
  box-shadow:0 15px 35px rgba(0,0,0,.45);
}

.toast.show {
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

.toast.error { background:#991b1b; }
.toast.success { background:#166534; }

/* ================= CAMPUS POLYGON ================= */
.campus-boundary {
  animation: glow 4s ease-in-out infinite;
  filter: drop-shadow(0 0 10px rgba(37,99,235,.5));
}

@keyframes glow {
  0%,100% { opacity:.75 }
  50% { opacity:1 }
}

@media (max-width: 600px) {
  .controls {
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    border-radius: var(--radius) var(--radius) 0 0; /* Rounded top only */
    padding: 15px;
    box-sizing: border-box;
    animation: slideUp 0.4s ease;
  }

  @keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
  }

  /* Increase touch target sizes for mobile */
  select, button {
    height: 48px; 
    font-size: 1rem;
  }

  .header h1 {
    font-size: 1rem;
  }

  /* Hide labels on mobile to save space, use placeholders or context */
  label {
    margin-top: 4px;
    font-size: 0.65rem;
  }
}
</style>
</head>

<body>

<div id="map"></div>

<div class="controls">
  <div class="header">
    <h1>VIT Signal Map</h1>
    <div id="status">
      <div id="status-light"></div>
      <span id="status-text">Connecting</span>
    </div>
  </div>

  <div id="offline-indicator" class="offline-banner">
    üì¥ Offline ‚Äì live updates paused
  </div>

  <label>Data Layer</label>
  <select id="heatmap-data">
    <option value="dbm">Signal Strength</option>
    <option value="download">Download Speed</option>
  </select>

  <label>Carrier</label>
  <select id="carrier-select">
    <option value="">All</option>
    <option>Jio</option>
    <option>Airtel</option>
    <option>VI</option>
    <option>BSNL</option>
  </select>

  <label>Network</label>
  <select id="network">
    <option value="">All</option>
    <option>3G</option>
    <option>4G</option>
    <option>5G</option>
  </select>

  <button id="locate-btn" class="btn-primary">
    üìç Show My Location
  </button>
  <a href="/upload" style="text-decoration: none;">
    <button class="btn-secondary" style="margin-top: 10px; background: #64748b; color: white;">
        üì§ Contribute Data
    </button>
  </a>
</div>

<div id="toast" class="toast"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>

<!-- main.js stays exactly the same -->
<script src="/static/main.js"></script>

</body>
</html>
